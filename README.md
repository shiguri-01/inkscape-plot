# inkscape-plot

グラフを描画するInkscapeエクステンションです。

- **Excelからコピペ可能**：グラフの元データをExcelから直接貼り付けられます。
- **対数グラフに対応**：片対数・両対数どちらも作成できます。
- **編集しやすい**：Inkscapeで動くので、グラフを描いたあとに直接編集できます。軸ラベルの位置調整や凡例の追加が簡単です。

<div style="text-align:center;">
   <img src="docs/assets/sample.png" alt="Sample Plot" style="max-width:480px;"/>
</div>

## インストール

動作確認済みバージョン：Inkscape 1.4.2

1. このリポジトリをダウンロード（またはclone）します。
2. Inkscapeのメニューから**編集 > 環境設定 > システム**を開き、**ユーザーエクステンション**のパスを確認します。
3. ダウンロードしたフォルダを手順2で確認したフォルダに移動させます。

   ```
   （ユーザーエクステンション）/
      inkscape-plot/
         plot.inx
         src/
            main.py
            ...
         ...
   ```
4. Inkscapeを再起動します。

## 使い方

Inkscapeのメニューから**エクステンション > レンダリング > プロッター出力**を選択します。

### クイックスタート

1. **データ**タブに、次をそのまま貼り付けます（列区切り：space）。

   ```
   # x  y
   0   0
   1   2
   2   4
   3   6
   4   8
   ```

2. **x軸**タブ：最小値=0, 最大値=4（線形）
3. **y軸**タブ：最小値=0, 最大値=8（線形）
4. **プロット**タブ：x列=1, y列=2
5. **適用**をクリック

### 基本

1. **データ**タブに、タブ区切りで数値を入力します。
   - `#`で始まる行はコメントとして無視されます。
   - Excelからそのままコピペできます。
   - スペース区切り、カンマ区切りもサポートしています。
2. **x軸**・**y軸**タブで、軸の範囲と目盛りの間隔を設定します。
   - 線形スケールと対数スケールを選択できます。
3. **プロット**タブで、データのどの列をx・yに使うか指定し、マーカーの形を選びます。
4. **タイトル・外枠**タブで、グラフのタイトルや枠線のスタイルを設定します。
5. ダイアログ下部の**描画する項目**で、何を描くか選択します（デフォルトは全てオン）。
6. **適用**ボタンをクリックするとグラフが描画されます。

### 応用：複数の系列を重ねる

このエクステンションでは1度の実行で1つの系列しか描画できませんが、
複数回実行してグラフを重ね描きすることで、複数系列のグラフに対応できます。

**データ**：

```
# 時間  温度  湿度
1      20    60
2      22    58
3      24    55
```

1. **温度のグラフを描く**
   - データタブ：上記データを入力
   - x軸タブ：最小値=1, 最大値=3
   - y軸タブ：最小値=0, 最大値=30（温度の範囲）
   - プロットタブ：x列=1, y列=2
   - 描画する項目：すべてにチェック

2. **湿度を追加**
   - データタブ：（さっきと同じ）
   - x軸タブ：（さっきと同じ）
   - y軸タブ：最小値=0, 最大値=100（湿度の範囲）, 配置/外側へのオフセット(px)=90
   - プロットタブ：x列=1, y列=3
   - 描画する項目：「y軸」と「プロット」だけにチェック

### トラブルシューティング

#### メニューに「プロッター出力」が表示されない

- Inkscapeを再起動する
- インストール先が「ユーザーエクステンション」フォルダ直下か確認する
  
#### 何も描画されない

- ページ番号が正しいか確認する
- 描画先レイヤーが非表示になっていないか確認する
  
#### 点がプロットされない

- データが軸の範囲内にあるか確認する
- プロットで参照する列を確認する。列番号は1始まりです
- マーカーの形を「（なし）」以外に設定する
- 描画する項目の「プロット」にチェックを入れる
  
#### 対数軸でエラーが発生する

- データに0以下の値が含まれていないか確認する
- 軸の最小値が0以下になっていないか確認する
## Contributing

改善案があったりバグを見つけたりした場合は、気軽にプルリクエストやイシューを送ってください。

### 開発環境

```bash
uv sync
uv run ruff check .  # リンティング
uv run ruff format . # フォーマット
```

> [!NOTE]
> uvで作成される実行環境と、実際に拡張機能を動かす実行環境は異なります。
> そのため、外部パッケージの依存を追加することはできません。
> 必ずInkscapeで実際に動作確認してください。

---

© 2025 shiguri | [MIT License](LICENSE)
